<!DOCTYPE html>
<html>
	<head>
		<style>
			body{
				background-color: #ccffff;
				font-family: Lucida Sans Unicode;
			}
			#message{
				background-color: #ccffff
			}
			#key{
				background-color: #ccffff
			}
			#result{
				background-color: #ccffff;
			}
			</style>
			<script>
				/*function encryptStringWithXORtoHex(input,key) {
    var c = '';
    while (key.length < input.length) {
         key += key;
    }
    for(var i=0; i<input.length; i++) {
        var value1 = input[i].charCodeAt(0);
        var value2 = key[i].charCodeAt(0);

        var xorValue = value1 ^ value2;

        var xorValueAsHexString = xorValue.toString("16");

        if (xorValueAsHexString.length < 2) {
            xorValueAsHexString = "0" + xorValueAsHexString;
        }

        c += xorValueAsHexString;
    }
		document.getElementById("encrypted").value = c;
    return c;
}
				function encrypt(){
					let key = document.getElementById("key").value;
					let message = document.getElementById("message").value;
					let c = "";
					while (key.length < message.length) {
         key += key;
					}
				for(let i=0; i<message.length; i++) {
        let value1 = message[i].charCodeAt(0);
        let value2 = key[i].charCodeAt(0);

        c += String.fromCharCode(value1 ^ value2);

				}
				c = btoa(c)
				document.getElementById("result").value = c;
    return c;
				}*/

				function encrypt(){
					let key = document.getElementById("key").value;
					let message = document.getElementById("message").value;
					b = convert(message, key);
					b = btoa(b);
					document.getElementById("result").value = b;

				}

				function convert(message,key){
					let b = "";
					/*while(key.length < message.length) {
						key += key;
					}*/
					for(let i = 0; i < message.length; i++){
						let value1 = message[i].charCodeAt(0);
						let value2 = key[i % key.length].charCodeAt(0);

						b += String.fromCharCode(value1 ^ value2);
					}
					return b;
				}

				function decrypt(){
					debugger;
					let key = document.getElementById("key").value;
					let message = document.getElementById("result").value;
					message = atob(message)
					message = convert(message, key);
					document.getElementById("result").value = message;
				}
				</script>
				</head>
				<body>
					<h2>Message Encryptor</h2>
					<h3>The encryptor encrypts your messages with a key that you choose.</h3>
					<br>
					<p>Enter key here:</p>
					<br>
					<input type = "password" id = "key">
					<br>
					<br>
					<p> Input your message here:</p>
					<textarea id = "message" rows = "10" cols = "50"></textarea>
					<br>
					<button type = "button" onclick = "encrypt()">Encrypt</button>
					<br>
					<br>
					<button type = "button" onclick = "decrypt()">decrypt</button>
					<br>
					<p> the encrypted message is below, press decrypt to decrypt</p>
					<textarea id = "result" rows = "10" cols = "50"></textarea>
				</body>
</html>

